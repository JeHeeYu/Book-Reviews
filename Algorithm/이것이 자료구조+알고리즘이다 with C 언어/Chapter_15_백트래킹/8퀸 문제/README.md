# 8개의 퀸 문제

## 8퀸(Queen) 문제
퀸은 다음 그림과 같이 여덟 방향으로 움직이면서 공격할 수 있고 이동 범위도 체스판 전체에 이른다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/5649d292-0cf6-4656-94cd-a94efc43e594)

<br>

체스 선수 막스 베젤(Max Bezzel)은 이러한 퀸의 속성을 이용하여 1848년에 퍼즐을 하나 만들었다.
<br>
문제는 퀸 8개를 8 * 8 크기의 체스판 안에서 서로 공격할 수 없도록 배치하는 모든 경우를 구하는 문제이다.
<br>
<br>
예를 들어 첫 번째 퀸을 [3, 4] 위치에 놓으면 [5, 6]에는 두 번째 퀸을 놓을 수 없다.
<br>
두 번째 퀸의 위치가 첫 번째 퀸의 공격 범위 안에 들어가기 때문이다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/3383b9e6-1fc7-4e91-a346-8e4447a724c7)

<br>

하지만 다음 그림처럼 두 퀸이 [3, 4]와 [5, 5]에 놓여 있으면 서로를 공격할 수 없다.
<br>
수평, 수직, 대각선 어느 방향에서도 서로를 만날 수 없기 때문이다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/7852ca92-9ecf-44b5-9f9b-248416188cff)

<br>

이런 식으로 8개의 퀸이 서로를 공격할 수 없도록 배치하는 모든 방안을 찾아야 하는데, 후보해와 해의 수가 약간 많은 것이 문제이다.
<br>
체스판의 칸이 모두 64개이고 그 중에서 8개를 골라 퀸을 배치할 수 있으므로 후보해의 수는 총 44억개가 조금 넘는다.
<br>
<br>
이 중에서 실제 해는 92개 뿐이다.
<br>
<br>
말하자면 8개의 퀸 문제는 44억 개 이상의 후보해 속에서 실제 해 92개를 모두 찾아내라고 요구하는 문제이다.
<br>
<br>
8개의 퀸 문제는 8 * 8 크기의 체스판을 염두에 두고 제안됐지만 다른 크기의 체스판으로 문제를 축소 및 확장할 수 있다.
<br>
4 * 4 이상의 크기라면 이 문제를 적용할 수 있기 때문에 8개의 퀸 문제를 N개의 퀸 문제라 부르기도 한다.

<br>

## 8개의 퀸이 만드는 해공간과 백트래킹
8개의 퀸 문제의 해공간을 어떻게 구하는지 이해를 돕기 위해 8 * 8 크기 대신 4 * 4 크기의 체스판이 있다고 가정한다.
<br>
<br>
우선 첫 번째 퀸을 놓을 수 있는 위치는 다음과 같이 [1, 1], [1, 2], [1, 3], [1, 4] 네 가지이다.
<br>
이 네 가지 중 첫 번째 말의 위치는 최종해의 부분 후보해이며, 하나씩 시도해서 해가 될 조건을 만족하는지 확인해야 한다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/0db1fc54-f912-4dab-bec0-4b0663cda0ab)

<br>

먼저 [1, 1] 부분부터 보면 [1, 1]과 [2, 1]은 서로를 수직 방향으로 위협하고 [1, 1]과 [2, 2]는 대각선 방향으로 공격이 가능하다.
<br>
[1, 1]에 대해 [2, 3]과 [2, 4]는 공격이 불가능하므로 일단 부분해로 수용한다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/a4fb88f7-5693-45d1-8652-a521e8b8ba01)

<br>

하지만 [2, 3]은 수용할 수 있는 세 번째 부분해가 없고 [2, 4]는 유일하게 수용 가능한 [3, 2]마저도 수용 가능한 네 번째 부분해가 없으므로 폐기해야 한다.
<br>
<br>
결국 [1, 1] 부분해도 폐기하고 첫 번째 부분해 선택으로 백트래킹 해야한다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/75732dda-d8cd-41ee-80e8-34fdf7aceab0)

<br>
다시 처음으로 돌아와서 [1, 2]를 첫 번째 부분해로 선택한다.
<br>
[1, 2]에 이은 두 번째 부분해 중 [2, 1], [2, 2], [2, 3]은 모두 [1, 2]를 위협하는 위치이기 때문에 버려야 한다.
<br>
<br>
[2, 4]만이 [1, 2]를 위협하지 않으므로 이를 두 번째 부분해로 채택한다.
<br>
[2, 4]에 이은 부분해를 보면 [3, 1]을 제외한 나머지가 모두 [1, 2]나 [2, 4]를 위협하는 위치이므로 [3, 1]을 세 번째 부분해로 채택한다.
<br>
[3, 1]의 후보해 네 개 중 [4, 3]을 빼고 모두 수용할 수 없는 위치들이다.
<br>
<br>
따라서 [4, 3]을 네 번째 부분해로 채택한다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/6f060218-22f1-4c1b-b69e-a43850e8e624)

<br>

이렇게 해서 [1, 2] - [2, 4] - [3, 1] - [4, 3] 으로 이어지는 첫 번째 해를 얻었다.
<br>
4개의 퀸 문제에서 후보해의 수는 총 1820개이다.
<br>
해공간의 절반을 탐색했으니 원래는 910개의 후보해를 시도했어야 하지만 백트래킹을 이용하여 불필요한 후보해 검사량을 크게 줄일 수 있었다.

<br>

## N개의 퀸 문제 풀이 알고리즘 구현
8개의 퀸 문제는 N개의 퀸 문제로 일반화할 수 있으므로 N개의 퀸 문제를 만든다.

<br>

### 자료구조 정의
먼저 해를 담을 자료구조로 체스판과 같은 N^2 크기의 배열이 필요하다.
<br>














