# Bus Trasfer Machanism

## 버스(Bus)
버스는 여러명의 승객을 태우고 운송하는 수단을 말한다.
<br>
데이터의 측면에서도 운송 수단이 맞기는 하다.
<br>
<br>
원론적으로 버스란 장치들이 정보 공유를 위해서 공유하는 선들의 집합이라고 한다.
<br>
가끔 모든 디지털 신호들은 버스를 통해서 이동한다는 말이 여기저기 보이는데, 어떠한 특정 시점에서 시간을 멈추어 버스를 쳐다 본다면, 버스 위에는 그 당시에 버스를 쓸 수 있는 허가를 받은 장치들의 신호만이 보인다고 보면 된다.
<br>
<br>
예를 들어 A와 B를 Wire로 연결하여 A-B로 만들어 놓느 다음에 A에서 B로 데이터를 전송하면 전기 신호도 빛의 속도와 마찬가지의 속도로 이동을 하니, 동시에 A가 보낸 신호가 Wire 위에 떠 잇다고 봐야 한다.
<br>
<br>
결국, 마구 엉킨 버스 시스템은 클럭에 맞추어 한 클럭의 시간을 쪼개어 봤을 때, 한 가지 종류의 신호만이 존재하게 되는 것이며, 계속 시간을 흘려 보내면서 관찰했을 때는 각 클럭 단위 시간마다 번쩍 번쩍 하면서 다른 종류의 신호들이 네온 사인처럼 나타났다가 사라지는 것이다.
<br>
<br>
즉, 버스로 통신할 필요가 있는 여러 개의 회로들을 엮어 놓으면 클럭에 따라 서로 통신할 필요가 있는 것들 끼리 신호가 버스 라인에 떠 있는 것이다.
<br>
<br>
이걸 길 하나로 다음 그림처럼 표현할 수 있다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/12766f65-a4bc-4ecf-be6c-b63fc1c16980)

<br>
이렇게 단위 시간당 얼마나 많은 데이터들이 뜰 수 있는 문제와 같다.
<br>
단위 시간당 데이터를 Bus Bandwidth라고 표현하며, 위 경우에는 클럭 주파수가 1Hz이다.
<br>
<br>
이런 뒤엉킨 버스 시스템의 미장센은 아비터(Arbiter)가 맡고 있다.
<br>
전체적인 신호등 역할을 하는 건데, 현재 시점에서 어느 장치가 버스를 사용할 지를 결정해주는 역할을 한다.
<br>
<br>
그리고 전형적인 버스 시세틈 중 레지스터에서의 버스를 예로 든다.
<br>
아래의 그림 같은 경우는 MUX를 이용한 레지스터끼리의 통신 통로로서의 버스이다.
<br>
1bit 씩도 Transfer 가능하며, 공통 버스를 이용하는 시스템인 셈으로 각각의 레지스터는 4bit 래치이며, 4개의 MUX에 연결되어 있다.
<br>
<br>
S1, S0가 MUX Control 신호이며, S1, S0에 의하여 MUX의 Enable Port 번호가 결정ㅈ된다.
<br>
<br>
예를 들어,
<br>
S1 = 0, S0 = 0 = 0번 Port Enable
<br>
S1 = 0, S0 = 1 = 1번 Port Enable
<br>
S1 = 1, S0 = 0 = 2번 Port Enable
<br>
S1 = 1, S0 = 1 = 3번 Port Enable
<br>
와 같이 되는 형식이다.
<br>
<br>
이 상황을 보면 S1, S0이 각각 1, 0 일 경우 MUX의 2번 Port만 데이터 입력이 가능한데,
<br>
MUX 각각의 2번 Port는 왼쪽에서 부터 C3, C2, C1, C0가 연결되어 있어서 Register C가 버스를 독점하게 되는 구조이다.
<br>

![image](https://github.com/JeHeeYu/Book-Reviews/assets/87363461/3951d095-d828-4b50-8b42-1bf7b87deabc)

<br>

이런 식으로 따져 진리표를 그려보면 아래와 같다.

```
S1    S0        EnablePort       Register
0     0             0               A
0     1             1               B
1     0             2               C
1     1             3               D
```

이런 시스템이라면 S1, S0 신호선을 잘 이용해서 그때 필요한 버스 사용권을 각각의 레지스터들에게 할당할 수 있다.
<br>
<br>
보통은 이런 S1, S0을 아비터라는 신호등이 자신의 Algorithm Policy에 의거하여 수용권을 부여한다.
<br>
<br>
버스에는 주소 버스, 데이터 버스, 제어 및 상태 버스 등 3가지 종류의 버스가 있다.
<br>
주소 버스에는 현재 MCU가 Access 하려는 주소가 번쩍, 즉 MCU에서 나오는 단방향 신호이다.
<br>
데이터 버스는 양방향으로서 MCU가 데이터를 주고 받을 수 있다.
<br>
제어 버스는 단방향일 수도 양방향일 수도 있다.
